# ![](https://images.pexels.com/photos/208321/pexels-photo-208321.jpeg)

# 背景

之前都是搞短视频推荐，现在有必要学习一下计算广告

内容来自于书籍《计算广告》，公众号-申探社

# 广告

## 背景

- 竞价：内部流量货币化
- 合约广告 -> 定向广告 -> 竞价广告
- 竞价广告：保质（单位流量的成本）不保量
- 广告信息接收过程：曝光，关注，理解，接受，保持，决策
- 广告主 - campaign - ad group - creative
- 受众定向的典型方法：地域、人口数行、上下文、行为、精确位置、重定向、新客推荐定向、动态定价、场景
- CPM 是展示量合约，这种合约是担保式投送，如果没有完成合约中的投放量，需要媒体承担赔偿
- 展示量合约在人群标签非常丰富精确的时候很难有效运作，因为没办法在线预估流量的分配，所以竞价广告应运而生
- eCPM = ctr * value 其中 ctr 数据来自于媒体，而价值来自于客户
- 广告竞价策略：广义第二高价 (generalized second-price auction) 和 Vickrey–Clarke–Groves (VCG) auction
- 广义第二高价简单、易解释，但不是多位置拍卖的社会福利最优
- CPC 场景下的广义第二高价 $q_{s}= \frac{\mu_{s+1}b_{s+1}}{\mu_{s}} + \Delta$, 其中 $\mu$ 是点击率，$b$ 是出价，$\Delta$ 一般是广告系统最小货币单位，比如 1 分
- VCG： 赢得某个位置的广告主付出的成本是占据这个位置给其他市场参与者带来的价值损害 $q_{s} = \Sigma_{t>s}^{} (\mu_{t-1} - \mu_{t})v_{t}$
- VCG 是社会福利最优，广告平台+广告主的整体收益达到最大，不过在 VCG 中平台收入不如 GSP
- 价格挤压：对 eCPM 公式进行微调，加入 squashing 因子, $r=\mu^{k}b$ 如果 k 调大，则强调广告质量、相关性，反之鼓励竞争，减轻财务压力
- 底价(market reserve price),一般是找到一个填充率还没有明显下降的 CPM 底价，然后根据质量度算 CPC 底价
- 平台关注的是收入最大化，也就是最优拍卖问题，当拍卖的标的为单个不可分物品，则有 Myerson auction 给出了理论最优
- 在一个拍卖市场，客户的数量和活跃度是决定收入的根本
- CPC 竞价：点击率供给方算，价值需求方算
- 程序化交易：都需求方算，实时报价，强者愈强
- 智能投放：供给方多算，需求方提供转化价值，oCPX，可以扶持小客户、提高市场活跃度
- 搜索广告：查询扩展，检索，排序，放置，定价
- DSP for 需求方，SSP for 供给方
- DSP 出价策略基于 2条曲线，eCPM（越高越好） 和市价（越低越好），会根据历史情况预测
- 用户数据：第一方（广告主）第二方（广告平台）第三方（不直接参与广告交易的数据提供方）
- 数据的重复售卖会引起数据价格向流量价格的转移（因为重复售卖后，定向同一个用户时竞价抬升流量成本，数据的回报就减少了）

# 业务逻辑

## 出价模式

- 行为序列： m 展现->c 点击->i 下载->a 激活->p 付费

- 每个行为A的价格，等于后续行为B的价格乘以行为A到行为B的比率 $CPC=p(c\rightarrow a) *CPA$

- **四点三率两控制一加强**

- 四点：
  
  - 竞价点：一般都是 eCPM，也就是“展现”
  
  - 计费点：按什么的个数收费
  
  - 出价点：投放后台填写的价格
  
  - 考核点：可能是 ltv (live time value), 7日 roi

- 三率：p(竞价点->计费点), p(计费点->出价点), p(出价点->考核点)

- 付费点通常不能超过媒体平台完全控制的行为点，不能到达由广告主收集的行为点。

- oCPX 把出价点和计费点分离了，普通 CPM, CPC 是在一块的。

- 两控制：成本控制，预算控制

- oCPC中，$p(c\rightarrow a)$由媒体平台预估，如果预估偏高，媒体平台的收入是增加的，偏低则媒体平台收入下降。理论上媒体平台就有动机在短期内故意预估偏高（不会长期偏高是因为广告ROI下降后，会减少投放，最终损害媒体平台利益）

- 上面的问题通过媒体平台超成本赔付机制来自我制约

- 赔付要求广告积累的行为数(例如激活数）达到一定的数量才开始赔付，这个最小成本应大于广告主薅冷启流量羊毛的成本（比如没有回传 action 也会有一定的初始流量）

- 激活付费双出价：有 2 个不同的出价点，广告主会把 2 个行为数据都给媒体平台，媒体平台提供出价转化服务，得到 2 个计费点价格。两个价格融合为最终价格。

- 激活付费双出价和单付费出价的差一点在于，“激活成本不达标，付费成本达标”的流量单付费出价可以拿到

- 前期付费数据较少，付费成本在收敛到付费出价之前，会经历较大的波动；放弃激活成本不达标的流量，来达到降低前期付费成本波动的效果，最后可能学习得更稳，成功率更高，全时间段的综合成本更低。

- 对于已经积累到较多付费数据，和前期付费成本波动较小的广告，可能用单付费出价是更合适的选择。

- 一加强：出价点、考核点中间新增一个加强点，$ ecpm_{adj}= p(竞价点 \rightarrow 出价点)*adj(x)*出价点出价 $

- 媒体平台对于大媒体可以是一体的，不过小媒体自己没有这种能力，多个小媒体接入广告联盟（平台）; 

- 小媒体 - 流量聚合 - 广告联盟 - 广告主

- 联盟模式的区别在于，是平台赔付广告主，而不是归因到小媒体。小媒体有制造虚假展现/点击的动机（让平台的模型对于p(计费点->出价点）预估偏高）；所以联盟的流量质量经常稍差

- RTB模式就是将投放平台从与流量聚合的利益共同体中分离出来

- DSP 盈利模式：
  
  - 套利模式
  
  - 服务费模式：
  
  - 消耗分成模式: 收入和广告主消耗成正比

- RTA可以有动态出价、动态过滤 2 种用法。第一种，RTA不适合于买新用户，而更适合对广告主旗下某产品A的用户投放旗下其他产品B的广告。所以RTA特别适合电商广告，而不适合游戏广告；第二种，RTA 作为“实时黑名单（realtime blacklist)”的方式用来做用户的动态过滤，对于其他平台转化过的用户，广告主就不要这个流量

- 保率双出价：系统目标是激活成本不超过激活出价，并且付费成本不超过付费出价，并且激活到付费的率（即付费数/激活数，也就是激活成本/付费成本），不低于激活出价/付费出价。（背后逻辑是，广告主的目标可能是付费金额，而这正相关于激活到付费的率）

- $ARRPU=\frac{付费金额}{付费数}$ 

- 保率双出价和带加强点的单出价区别: 保率双出价通过广告主手动控制“出价点1到出价点2的率”这一个因素来影响出价点2到考核点的率，不过不需要广告主回传考核点数据。带加强点的单出价可以通过模型自动控制包含“出价点1到出价点2的率”在内的多个因素来影响出价点2到加强点的率，不过需要广告主回传加强点数据。

- 流量减少，保障提升：付费出价 -> 不保率激活付费单出价 -> 保率激活付费单出价/带加强点的付费单出价 -> 付费金额出价（ROI出价）

- GSP(广义二价计费): $charge^{ad1}=\frac{P^{ad2}(排序点\rightarrow 计费点)*Bid^{ad2}_{计费点}}{P^{ad1}(排序点\rightarrow 计费点)}$

- nobid 可以认为平台把更多的权利和义务交给了优化师，包括判断冷启动素材跑量的权利和义务，冷启动策略或其他调价策略的制定，风控策略的把握。对于优化师的发挥空间更大了，但是投放也变得更加复杂。

- 
